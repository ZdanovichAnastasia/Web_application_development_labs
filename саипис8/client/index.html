<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Socket.io</title>
        <link rel="stylesheet"  href="style.css">
        <script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js' type='text/javascript'></script>
    </head>
 
    <body>
        <h1>ПEРЕЧЕНЬ ИНСТРУМЕНТОВ</h1>
        <div id = "ent">
            <textarea id="numbers" class="number-area" name="numbers" placeholder="Введите названия инструментов"></textarea>
            <p><input type="button" value="Названия после обработки" id="cor" />
            <input type="button" value="Записать в файл" id="poke" /></p>
            <div id = "ent1"></div>
        </div>

        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://localhost:5000');
            socket.on('message', function(message) {
                //alert('The server has a message for you: ' + message);
            })
            socket.on('file1', function(message) {
                //alert('The server: ' + message);
                $("#ent1").empty();
                $("#ent1").append("<h2>Содержимое файла</h2>");
                for(var i = 0; i < message.length-1; i++){
                    $("#ent1").append(" <div id = "+i+">"+ message[i][0]);

                    for(var j = 1; j < message[i].length; j++){
                        $("#"+i).append(message[i][j]);
                    }
                }
            })
            $('#poke').click(function () 
            {       
                var number = $('#numbers').val().split('\n');
                //alert(number);
                socket.emit('message', number);
            })
            $('#cor').click(function () 
            {       
               window.location = "page2.html";
            })
        </script>
    </body>
</html>